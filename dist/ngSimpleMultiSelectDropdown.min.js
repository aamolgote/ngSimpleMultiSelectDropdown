/*! ng Simple Multi Select Dropdown - v1.0.0 - 2016-04-17
* Copyright (c) 2016 ; Licensed  */
!function(){"use strict";angular.module("simpleMultiSelectDropdown",[])}(),angular.module("simpleMultiSelectDropdown").run(["$templateCache",function(a){"use strict";a.put("src/templates/multiSelectDropdown.html",'<div class="multiple-select-wrapper"><div class="selected-items-box" tabindex="0"><span ng-show="(dropdownItems | filter: getSelectedItemsOnly).length > maxItemsDisplayed && !selectAllDropdownItems" title="See more items..">{{(dropdownItems | filter: getSelectedItemsOnly).length}} selected</span> <span class="dropdown-icon"></span><ul class="items-list" ng-show="(dropdownItems | filter: getSelectedItemsOnly).length <= maxItemsDisplayed && !selectAllDropdownItems"><li ng-repeat="dropdownItem in dropdownItems | filter: getSelectedItemsOnly| limitTo: maxItemsDisplayed">{{dropdownItem[displayField]}}{{$last ? \'\' : \', \'}}</li></ul><span ng-show="(dropdownItems | filter: getSelectedItemsOnly).length === 0 && dropdownItems.length > 0 && !selectAllDropdownItems" title="{{selectText}}">{{selectText}}</span> <span ng-show="dropdownItems.length === 0" title="{{noItemsText}}">{{noItemsText}}</span> <span ng-show="dropdownItems.length > 0 && selectAllDropdownItems" title="{{allText}}">{{allText}}</span></div><div class="list"><ul class="items-list"><li ng-show="dropdownItems.length > 0 && showAll" ng-class="{\'items-list-selected\' : currentIndex === 0}"><input id="filterDiv" type="checkbox" ng-model="selectAllDropdownItems" ng-click="selectAll()"><span style="padding:0px 0px 0px 5px">All</span></li><li ng-repeat="dropdownItem in dropdownItems" ng-class="{\'items-list-selected\' : $index == currentIndex - 1 }"><input type="checkbox" ng-model="dropdownItem.selected" ng-click="checkBoxChecked(dropdownItem.selected)"> <span>{{dropdownItem[displayField]}}</span></li></ul></div></div>')}]),function(){"use strict";var a=angular.module("simpleMultiSelectDropdown");a.directive("ngSimpleMultiSelectDropdown",["$document",function(a){return{restrict:"EA",scope:{dropdownItems:"=",displayField:"@",noItemsText:"@",selectAllDropdownItems:"=",selectText:"@",allText:"@",showAll:"=",maxItemsDisplayed:"@"},templateUrl:"src/templates/multiSelectDropdown.html",replace:!0,link:function(b,c,d,e){function f(){$(k).toggle("slideDown"),i=!0,a.bind("click",h)}function g(){$(k).slideUp(),i=!1,b.currentIndex=-1,a.unbind("click",h)}function h(){g()}b.currentIndex=-1;var i=!1,j=c[0].querySelector(".selected-items-box"),k=c[0].querySelector(".multiple-select-wrapper .list");c[0].querySelector(".multiple-select-wrapper .list .items-list");$(j).bind("click",function(a){a.stopPropagation(),f()}),$(k).bind("click",function(a){a.stopPropagation()}),b.getSelectedItemsOnly=function(a){return a.selected},b.selectAll=function(){angular.forEach(b.dropdownItems,function(a,c){a.selected=b.selectAllDropdownItems}),b.selectAllDropdownItems&&($(k).slideUp(),i=!1,$(j).focus())},b.checkBoxChecked=function(a){if(!a&&b.selectAllDropdownItems)b.selectAllDropdownItems=!1;else if(a&&!b.selectAllDropdownItems){for(var c=!0,d=0;d<b.dropdownItems.length;d++)if(b.dropdownItems[d]&&!b.dropdownItems[d].selected){c=!1;break}b.selectAllDropdownItems=c}},b.$on("$destroy",function(){c.off("keydown"),c.off("keyup"),a.unbind("click",h),$(j).unbind("click"),$(k).unbind("click")}),c.on("keydown",function(a){if(40!==a.which||i)if(40===a.which&&i)b.dropdownItems&&b.currentIndex<b.dropdownItems.length&&(b.currentIndex++,b.$apply()),a.preventDefault(),a.stopPropagation();else if(38==a.which&&i)b.currentIndex>=1&&(b.currentIndex--,b.$apply()),a.preventDefault(),a.stopPropagation();else if(32===a.which){if(a.preventDefault(),a.stopPropagation(),0===b.currentIndex&&i)b.selectAllDropdownItems=!b.selectAllDropdownItems,b.selectAll(),b.$apply();else if(b.dropdownItems&&b.dropdownItems[b.currentIndex-1]){var c=b.dropdownItems[b.currentIndex-1];c.selected=!c.selected,b.checkBoxChecked(c.selected),b.$apply()}}else 9===a.which?i&&(g(),a.preventDefault(),a.stopPropagation()):13===a.which&&(a.preventDefault(),a.stopPropagation());else f(),a.preventDefault(),a.stopPropagation()}),c.on("keyup",function(a){27===a.which&&i&&(g(),a.preventDefault(),a.stopPropagation())})}}}])}(),angular.module("simpleMultiSelectDropdown").run(["$templateCache",function(a){"use strict";a.put("src/templates/multiSelectDropdown.html",'<div class="multiple-select-wrapper"><div class="selected-items-box" tabindex="0"><span ng-show="(dropdownItems | filter: getSelectedItemsOnly).length > maxItemsDisplayed && !selectAllDropdownItems" title="See more items..">{{(dropdownItems | filter: getSelectedItemsOnly).length}} selected</span> <span class="dropdown-icon"></span><ul class="items-list" ng-show="(dropdownItems | filter: getSelectedItemsOnly).length <= maxItemsDisplayed && !selectAllDropdownItems"><li ng-repeat="dropdownItem in dropdownItems | filter: getSelectedItemsOnly| limitTo: maxItemsDisplayed">{{dropdownItem[displayField]}}{{$last ? \'\' : \', \'}}</li></ul><span ng-show="(dropdownItems | filter: getSelectedItemsOnly).length === 0 && dropdownItems.length > 0 && !selectAllDropdownItems" title="{{selectText}}">{{selectText}}</span> <span ng-show="dropdownItems.length === 0" title="{{noItemsText}}">{{noItemsText}}</span> <span ng-show="dropdownItems.length > 0 && selectAllDropdownItems" title="{{allText}}">{{allText}}</span></div><div class="list"><ul class="items-list"><li ng-show="dropdownItems.length > 0 && showAll" ng-class="{\'items-list-selected\' : currentIndex === 0}"><input id="filterDiv" type="checkbox" ng-model="selectAllDropdownItems" ng-click="selectAll()"><span style="padding:0px 0px 0px 5px">All</span></li><li ng-repeat="dropdownItem in dropdownItems" ng-class="{\'items-list-selected\' : $index == currentIndex - 1 }"><input type="checkbox" ng-model="dropdownItem.selected" ng-click="checkBoxChecked(dropdownItem.selected)"> <span>{{dropdownItem[displayField]}}</span></li></ul></div></div>')}]);